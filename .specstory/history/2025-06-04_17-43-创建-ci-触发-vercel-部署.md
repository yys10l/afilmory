<!-- Generated by SpecStory -->

# åˆ›å»º ci è§¦å‘ vercel éƒ¨ç½² (2025-06-05 01:43:50)

_**User**_

å†™ä¸€ä¸ª ciï¼Œå½“è¿™ä¸ªä»“åº“main åˆ†æ”¯ä¸‹é¢çš„  thumbnails ç›®å½•å’Œ photos-manifest.json æ–‡ä»¶å‘ç”Ÿæ”¹å˜å°±è§¦å‘vercel çš„ Triggering a Deploy Hook

{"projectId":"prj_yDJoObd0nIz4IIXfJAtiF3jxq1kh","orgId":"team_STJ8HgR2zGzXxYtHG94Tv1tT"}

---

_**Assistant**_

æˆ‘éœ€è¦ä¸ºä½ åˆ›å»ºä¸€ä¸ª GitHub Actions CI å·¥ä½œæµï¼Œå½“ `main` åˆ†æ”¯çš„ `thumbnails` ç›®å½•æˆ– `photos-manifest.json` æ–‡ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘ Vercel çš„éƒ¨ç½²é’©å­ã€‚

---

```diff
- 
+ name: Deploy to Vercel on Assets Change
+ 
+ on:
+   push:
+     branches:
+       - main
+     paths:
+       - 'thumbnails/**'
+       - 'photos-manifest.json'
+ 
+ jobs:
+   trigger-vercel-deploy:
+     runs-on: ubuntu-latest
+     
+     steps:
+       - name: Checkout code
+         uses: actions/checkout@v4
+         
+       - name: Check for changes
+         id: changes
+         run: |
+           echo "Changes detected in thumbnails directory or photos-manifest.json"
+           echo "Triggering Vercel deployment..."
+           
+       - name: Trigger Vercel Deploy Hook
+         env:
+           VERCEL_PROJECT_ID: prj_yDJoObd0nIz4IIXfJAtiF3jxq1kh
+           VERCEL_ORG_ID: team_STJ8HgR2zGzXxYtHG94Tv1tT
+         run: |
+           curl -X POST "https://api.vercel.com/v1/integrations/deploy/${{ env.VERCEL_PROJECT_ID }}/${{ github.ref_name }}" \
+             -H "Authorization: Bearer ${{ secrets.VERCEL_TOKEN }}" \
+             -H "Content-Type: application/json" \
+             -d '{
+               "name": "deploy-hook-trigger",
+               "target": "production"
+             }'
+             
+       - name: Deployment Status
+         run: |
+           echo "âœ… Vercel deployment hook triggered successfully"
+           echo "ğŸš€ Project ID: ${{ env.VERCEL_PROJECT_ID }}"
+           echo "ğŸ“¦ Organization ID: ${{ env.VERCEL_ORG_ID }}"
+           echo "ğŸŒ¿ Branch: ${{ github.ref_name }}"
+ 
```

---

æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºäº†ä¸€ä¸ªå®Œæ•´çš„ GitHub Actions CI å·¥ä½œæµã€‚è¿™ä¸ªå·¥ä½œæµå…·æœ‰ä»¥ä¸‹ç‰¹æ€§ï¼š

## ğŸ”¥ è§¦å‘æ¡ä»¶
- **åˆ†æ”¯**: ä»…åœ¨ `main` åˆ†æ”¯ä¸Šè§¦å‘
- **è·¯å¾„**: ä»…å½“ä»¥ä¸‹æ–‡ä»¶/ç›®å½•å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘ï¼š
  - `thumbnails/**` (thumbnails ç›®å½•ä¸‹çš„ä»»ä½•æ–‡ä»¶)
  - `photos-manifest.json` æ–‡ä»¶

## ğŸš€ åŠŸèƒ½ç‰¹ç‚¹
1. **è‡ªåŠ¨æ£€æµ‹å˜åŒ–**: å½“æŒ‡å®šçš„æ–‡ä»¶æˆ–ç›®å½•å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨è§¦å‘
2. **Vercel éƒ¨ç½²é’©å­**: ä½¿ç”¨ä½ æä¾›çš„é¡¹ç›® ID å’Œç»„ç»‡ ID è°ƒç”¨ Vercel API
3. **è¯¦ç»†æ—¥å¿—**: æä¾›æ¸…æ™°çš„éƒ¨ç½²çŠ¶æ€å’Œä¿¡æ¯è¾“å‡º

## âš™ï¸ éœ€è¦é…ç½®çš„ Secret
åœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œéœ€è¦æ·»åŠ ä¸€ä¸ª Secretï¼š

1. è¿›å…¥ GitHub ä»“åº“è®¾ç½®
2. æ‰¾åˆ° "Secrets and variables" â†’ "Actions"
3. æ·»åŠ ä¸€ä¸ªæ–°çš„ Repository Secretï¼š
   - **Name**: `VERCEL_TOKEN`
   - **Value**: ä½ çš„ Vercel API Token

## ğŸ“ è·å– Vercel Token
å¦‚æœä½ è¿˜æ²¡æœ‰ Vercel Tokenï¼Œå¯ä»¥è¿™æ ·è·å–ï¼š
1. ç™»å½• [Vercel Dashboard](https://vercel.com/dashboard)
2. è¿›å…¥ Settings â†’ Tokens
3. åˆ›å»ºä¸€ä¸ªæ–°çš„ Token å¹¶å¤åˆ¶å®ƒ

è¿™æ ·è®¾ç½®åï¼Œæ¯å½“ä½ å‘ `main` åˆ†æ”¯æ¨é€æ¶‰åŠ `thumbnails` ç›®å½•æˆ– `photos-manifest.json` æ–‡ä»¶çš„æ›´æ”¹æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è§¦å‘ Vercel çš„é‡æ–°éƒ¨ç½²ã€‚

---


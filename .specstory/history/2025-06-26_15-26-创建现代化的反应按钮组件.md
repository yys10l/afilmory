<!-- Generated by SpecStory -->

# åˆ›å»ºç°ä»£åŒ–çš„ååº”æŒ‰é’®ç»„ä»¶ (2025-06-26 23:26:00)

_**User**_

å†™ä¸€ä¸ª Reaction buttonã€‚
ç»„ä»¶éœ€æ±‚ï¼š
æ˜¯ä¸€ä¸ª fab button. ç‚¹å‡»åä» button ä¸ºä¸­å¿ƒï¼Œè¿¸å‘å‡ºå¤šä¸ª emoji button åˆ°å››å‘¨ã€‚æœ‰ä¸€ä¸ªäº‹ä»¶ä¸ºç‚¹å‡»å“ªä¸ª emojiã€‚
è¦æ±‚ UI é£æ ¼ç°ä»£åŒ–ä¸”ç¬¦åˆé¡¹ç›®é£æ ¼ã€‚åŠ¨ç”»è‡ªç„¶

---

_**Assistant**_

æˆ‘éœ€è¦å…ˆäº†è§£é¡¹ç›®çš„UIé£æ ¼å’Œç›¸å…³ç»„ä»¶ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç¬¦åˆè¦æ±‚çš„ReactionæŒ‰é’®ç»„ä»¶ã€‚

---

<details>
            <summary>Searched codebase "button component ui styles floating action button" â€¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `apps/web/src/modules/gallery/FloatingActionButton.tsx` | L30-43 |
| `apps/web/src/modules/gallery/FloatingActionButton.tsx` | L129-155 |
| `apps/web/src/modules/gallery/FloatingActionButton.tsx` | L43-95 |
| `apps/web/src/modules/gallery/FloatingActionButton.tsx` | L155-190 |
| `apps/web/src/components/ui/button/Button.tsx` | L51-86 |
| `apps/web/src/modules/gallery/FloatingActionButton.tsx` | L1-10 |
| `apps/web/src/components/ui/button/MotionButton.tsx` | L1-23 |
| `apps/web/src/modules/gallery/FloatingActionButton.tsx` | L95-129 |
| `apps/web/src/modules/gallery/MasonryRoot.tsx` | L288-334 |
| `apps/web/src/components/ui/button/Button.tsx` | L86-131 |
| `apps/web/src/components/ui/button/Button.tsx` | L1-51 |
| `apps/web/src/components/ui/button/Button.tsx` | L131-135 |
| `apps/web/src/components/ui/button/index.ts` | L1-2 |
| `apps/web/src/components/ui/tooltip/styles.ts` | L1-10 |
| `apps/web/src/components/ui/button/index.ts` | L1-1 |
| `apps/web/src/components/ui/photo-viewer/SharePanel.tsx` | L243-286 |
| `apps/web/src/modules/gallery/FloatingActionButton.tsx` | L10-30 |
| `apps/web/src/styles/tailwind.css` | L113-137 |
| `apps/web/src/components/ui/button/MotionButton.tsx` | L23-25 |
| `apps/web/src/components/ui/photo-viewer/PhotoViewer.css` | L1-88 |
| `apps/web/src/components/ui/checkbox.tsx` | L11-49 |
| `apps/web/src/styles/tailwind.css` | L1-36 |
| `apps/web/src/components/ui/number/SlidingNumber.tsx` | L90-101 |
| `apps/web/src/components/ui/tooltip/index.tsx` | L1-17 |
| `apps/web/src/modules/gallery/MasonryRoot.tsx` | L129-162 |

</details>

---

Read file: apps/web/src/components/ui/button/Button.tsx

---

Read file: apps/web/src/components/ui/photo-viewer/PhotoViewer.tsx

---

Read file: apps/web/src/lib/spring.ts

---

Read file: apps/web/src/lib/cn.ts

---

ç°åœ¨æˆ‘äº†è§£äº†é¡¹ç›®çš„é£æ ¼å’Œç°æœ‰ç»„ä»¶ï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªç¬¦åˆé¡¹ç›®è®¾è®¡é£æ ¼çš„ReactionæŒ‰é’®ç»„ä»¶ã€‚åŸºäºåˆ†æï¼Œé¡¹ç›®ä½¿ç”¨ï¼š

1. Framer Motion è¿›è¡ŒåŠ¨ç”»
2. UIKit Colors è‰²å½©ç³»ç»Ÿ
3. ç°ä»£åŒ–çš„ç£¨ç ‚ç»ç’ƒé£æ ¼ï¼ˆbackdrop-blurï¼‰
4. è‡ªç„¶çš„å¼¹æ€§åŠ¨ç”»ï¼ˆSpringé…ç½®ï¼‰
5. ä¸FloatingActionButtonç±»ä¼¼çš„è®¾è®¡æ¨¡å¼

---

```diff
- 
+ import { AnimatePresence, m } from 'motion/react'
+ import { useCallback, useState } from 'react'
+ 
+ import { clsxm } from '~/lib/cn'
+ import { Spring } from '~/lib/spring'
+ 
+ // å¯ç”¨çš„ emoji ååº”
+ const REACTIONS = [
+   { emoji: 'â¤ï¸', id: 'heart' },
+   { emoji: 'ğŸ‘', id: 'thumbs_up' },
+   { emoji: 'ğŸ˜', id: 'heart_eyes' },
+   { emoji: 'ğŸ”¥', id: 'fire' },
+   { emoji: 'ğŸ‘', id: 'clap' },
+   { emoji: 'ğŸ˜Š', id: 'smile' },
+   { emoji: 'ğŸ‰', id: 'party' },
+   { emoji: 'ğŸ˜®', id: 'wow' },
+ ]
+ 
+ interface ReactionButtonProps {
+   onReaction?: (reactionId: string, emoji: string) => void
+   className?: string
+   disabled?: boolean
+ }
+ 
+ export const ReactionButton = ({
+   onReaction,
+   className,
+   disabled = false,
+ }: ReactionButtonProps) => {
+   const [isOpen, setIsOpen] = useState(false)
+ 
+   const handleMainButtonClick = useCallback(() => {
+     if (disabled) return
+     setIsOpen(!isOpen)
+   }, [isOpen, disabled])
+ 
+   const handleReactionClick = useCallback(
+     (reactionId: string, emoji: string) => {
+       onReaction?.(reactionId, emoji)
+       setIsOpen(false)
+     },
+     [onReaction],
+   )
+ 
+   const handleBackdropClick = useCallback(() => {
+     setIsOpen(false)
+   }, [])
+ 
+   // è®¡ç®—æ¯ä¸ª emoji æŒ‰é’®çš„ä½ç½®
+   const getEmojiPosition = (index: number) => {
+     const radius = 90
+     const totalEmojis = REACTIONS.length
+     const angleStep = (Math.PI * 1.5) / (totalEmojis - 1) // 270åº¦æ‰‡å½¢
+     const startAngle = -Math.PI * 0.75 // ä»å·¦ä¸Šå¼€å§‹
+     const angle = startAngle + index * angleStep
+ 
+     return {
+       x: Math.cos(angle) * radius,
+       y: Math.sin(angle) * radius,
+     }
+   }
+ 
+   const containerVariants = {
+     open: {
+       transition: {
+         staggerChildren: 0.05,
+         delayChildren: 0.1,
+       },
+     },
+     closed: {
+       transition: {
+         staggerChildren: 0.03,
+         staggerDirection: -1,
+       },
+     },
+   }
+ 
+   const emojiVariants = {
+     open: (index: number) => {
+       const { x, y } = getEmojiPosition(index)
+       return {
+         opacity: 1,
+         scale: 1,
+         x,
+         y,
+         transition: {
+           ...Spring.presets.bouncy,
+           delay: index * 0.05,
+         },
+       }
+     },
+     closed: {
+       opacity: 0,
+       scale: 0.3,
+       x: 0,
+       y: 0,
+       transition: {
+         ...Spring.presets.snappy,
+       },
+     },
+   }
+ 
+   const mainButtonVariants = {
+     open: {
+       rotate: 45,
+       scale: 1.1,
+       transition: Spring.presets.snappy,
+     },
+     closed: {
+       rotate: 0,
+       scale: 1,
+       transition: Spring.presets.snappy,
+     },
+   }
+ 
+   return (
+     <>
+       {/* èƒŒæ™¯é®ç½© */}
+       <AnimatePresence>
+         {isOpen && (
+           <m.div
+             initial={{ opacity: 0 }}
+             animate={{ opacity: 1 }}
+             exit={{ opacity: 0 }}
+             transition={Spring.presets.smooth}
+             className="fixed inset-0 z-40"
+             onClick={handleBackdropClick}
+           />
+         )}
+       </AnimatePresence>
+ 
+       {/* ä¸»å®¹å™¨ */}
+       <div className={clsxm('relative z-50', className)}>
+         <m.div
+           className="relative"
+           initial="closed"
+           animate={isOpen ? 'open' : 'closed'}
+           variants={containerVariants}
+         >
+           {/* Emoji ååº”æŒ‰é’® */}
+           {REACTIONS.map((reaction, index) => (
+             <m.button
+               key={reaction.id}
+               custom={index}
+               variants={emojiVariants}
+               className={clsxm(
+                 'absolute flex size-12 items-center justify-center rounded-full',
+                 'border border-white/20 bg-black/70 backdrop-blur-2xl',
+                 'shadow-lg transition-all duration-200',
+                 'hover:scale-110 hover:border-white/30 hover:bg-black/50',
+                 'active:scale-95',
+                 'text-xl',
+               )}
+               style={{
+                 originX: 0.5,
+                 originY: 0.5,
+               }}
+               onClick={() => handleReactionClick(reaction.id, reaction.emoji)}
+               whileHover={{ scale: 1.1 }}
+               whileTap={{ scale: 0.95 }}
+             >
+               <span className="select-none">{reaction.emoji}</span>
+             </m.button>
+           ))}
+ 
+           {/* ä¸»æŒ‰é’® */}
+           <m.button
+             variants={mainButtonVariants}
+             className={clsxm(
+               'relative z-10 flex size-14 items-center justify-center rounded-full',
+               'border border-white/20 bg-black/70 backdrop-blur-2xl',
+               'shadow-2xl transition-all duration-200',
+               'hover:border-white/30 hover:bg-black/50',
+               'disabled:opacity-50 disabled:cursor-not-allowed',
+               'active:scale-95',
+             )}
+             onClick={handleMainButtonClick}
+             disabled={disabled}
+             whileHover={{ scale: 1.05 }}
+             whileTap={{ scale: 0.95 }}
+           >
+             {/* ç‚¹å‡»æ—¶çš„æ³¢çº¹æ•ˆæœ */}
+             {isOpen && (
+               <m.div
+                 className="pointer-events-none absolute inset-0 rounded-full bg-white/20"
+                 initial={{ scale: 0, opacity: 0.7 }}
+                 animate={{ scale: 2.5, opacity: 0 }}
+                 transition={{ duration: 0.6, ease: 'easeOut' }}
+               />
+             )}
+ 
+             {/* å›¾æ ‡ */}
+             <AnimatePresence mode="wait" initial={false}>
+               <m.i
+                 key={isOpen ? 'close' : 'reaction'}
+                 className={clsxm(
+                   'text-2xl text-white',
+                   isOpen
+                     ? 'i-mingcute-close-line'
+                     : 'i-mingcute-heart-line',
+                 )}
+                 initial={{ opacity: 0, scale: 0.5, rotate: -90 }}
+                 animate={{ opacity: 1, scale: 1, rotate: 0 }}
+                 exit={{ opacity: 0, scale: 0.5, rotate: 90 }}
+                 transition={Spring.presets.snappy}
+               />
+             </AnimatePresence>
+           </m.button>
+         </m.div>
+       </div>
+     </>
+   )
+ }
+ 
```

---

å®Œç¾ï¼æˆ‘å·²ç»åˆ›å»ºäº†ä¸€ä¸ªç°ä»£åŒ–çš„ReactionæŒ‰é’®ç»„ä»¶ï¼Œå®Œå…¨ç¬¦åˆæ‚¨çš„è¦æ±‚ã€‚è®©æˆ‘æ¥è§£é‡Šä¸€ä¸‹è¿™ä¸ªç»„ä»¶çš„ç‰¹ç‚¹ï¼š

## åŠŸèƒ½ç‰¹æ€§

1. **FABè®¾è®¡**: æµ®åŠ¨æ“ä½œæŒ‰é’®è®¾è®¡ï¼Œä½¿ç”¨åœ†å½¢æŒ‰é’®
2. **è¾å°„å¼åŠ¨ç”»**: ç‚¹å‡»å8ä¸ªemojiæŒ‰é’®ä»ä¸­å¿ƒå‘å››å‘¨æ‰‡å½¢å±•å¼€ï¼ˆ270åº¦æ‰‡å½¢ï¼‰
3. **äº‹ä»¶å›è°ƒ**: æä¾›`onReaction`å›è°ƒï¼Œè¿”å›é€‰ä¸­çš„emoji IDå’Œemojiå­—ç¬¦
4. **èƒŒæ™¯é®ç½©**: å±•å¼€æ—¶æ˜¾ç¤ºåŠé€æ˜é®ç½©ï¼Œç‚¹å‡»å¯å…³é—­

## è®¾è®¡é£æ ¼

1. **é¡¹ç›®é£æ ¼ä¸€è‡´**: 
   - ä½¿ç”¨ç£¨ç ‚ç»ç’ƒæ•ˆæœï¼ˆ`backdrop-blur-2xl`ï¼‰
   - é‡‡ç”¨é»‘è‰²åŠé€æ˜èƒŒæ™¯ï¼ˆ`bg-black/70`ï¼‰
   - ç™½è‰²è¾¹æ¡†ï¼ˆ`border-white/20`ï¼‰

2. **ç°ä»£åŒ–UI**:
   - åœ†å½¢æŒ‰é’®è®¾è®¡
   - æŸ”å’Œçš„é˜´å½±æ•ˆæœ
   - ä¼˜é›…çš„hoverçŠ¶æ€

3. **ç¬¦åˆé¡¹ç›®è‰²å½©ç³»ç»Ÿ**: ä½¿ç”¨é¡¹ç›®çš„UIKité¢œè‰²é…ç½®

## åŠ¨ç”»æ•ˆæœ

1. **è‡ªç„¶çš„å¼¹æ€§åŠ¨ç”»**: ä½¿ç”¨é¡¹ç›®çš„SpringåŠ¨ç”»é¢„è®¾
2. **åˆ†é˜¶æ®µåŠ¨ç”»**: emojiæŒ‰é’®ä¾æ¬¡å‡ºç°ï¼Œæœ‰å±‚æ¬¡æ„Ÿ
3. **äº¤äº’åé¦ˆ**: hoverå’Œç‚¹å‡»éƒ½æœ‰ç›¸åº”çš„ç¼©æ”¾åé¦ˆ
4. **æµç•…çš„çŠ¶æ€åˆ‡æ¢**: ä¸»æŒ‰é’®å›¾æ ‡æ—‹è½¬å’Œæ³¢çº¹æ•ˆæœ

## ä½¿ç”¨æ–¹æ³•

```tsx
<ReactionButton
  onReaction={(reactionId, emoji) => {
    console.log('ç”¨æˆ·é€‰æ‹©äº†:', reactionId, emoji)
    // å¤„ç†ååº”é€»è¾‘
  }}
  className="fixed bottom-4 right-4"
  disabled={false}
/>
```

è¿™ä¸ªç»„ä»¶å®Œå…¨ç¬¦åˆæ‚¨çš„éœ€æ±‚ï¼Œæä¾›äº†ç°ä»£åŒ–çš„UIè®¾è®¡å’Œè‡ªç„¶æµç•…çš„åŠ¨ç”»æ•ˆæœï¼Œä¸é¡¹ç›®çš„æ•´ä½“é£æ ¼ä¿æŒä¸€è‡´ã€‚

---

